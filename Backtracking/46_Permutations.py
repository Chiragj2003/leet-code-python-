"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    LeetCode #46 - Permutations                                â•‘
â•‘                    Topic: Backtracking                                       â•‘
â•‘                    Difficulty: Medium                                         â•‘
â•‘                    Company: Amazon, Google, Microsoft                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ğŸ¯ QUESTION IN SIMPLE TERMS                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

WHAT'S THE PROBLEM?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Given array of DISTINCT integers, return ALL possible permutations.

EXAMPLES:
â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ“ Input: [1,2,3]  â†’ Output: [[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]
âœ“ Input: [0,1]    â†’ Output: [[0,1],[1,0]]
âœ“ Input: [1]      â†’ Output: [[1]]

IMAGINE THIS (CHILD-FRIENDLY):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸª You have 3 performers: A, B, C.
   In how many different orders can they perform?
   ABC, ACB, BAC, BCA, CAB, CBA â†’ 6 ways!

ğŸ² Rolling dice: if you have numbers 1, 2, 3,
   list all different arrangements possible.

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    â­ AMAZON STAR METHOD ANSWER                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Œ SITUATION:
   Amazon delivery routes need all possible orderings of stops
   to find optimal delivery sequence.

ğŸ“Œ TASK:
   Generate all permutations of array.
   Time O(n! Ã— n), Space O(n).

ğŸ“Œ ACTION:
   Backtracking with used tracking:
   1. Try each unused number
   2. Mark as used, recurse
   3. Backtrack: unmark and try next

ğŸ“Œ RESULT:
   âœ“ Time: O(n! Ã— n) - n! permutations, n to copy each
   âœ“ Space: O(n) recursion depth
   âœ“ All routes generated for optimization

"""

# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸš€ OPTIMAL SOLUTION - Backtracking
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def permute(nums):
    """
    Backtracking with used array
    
    Example: [1,2,3]
    â”€â”€â”€â”€â”€â”€â”€
                    []
          /         |         \\
        [1]        [2]        [3]
       /  \\       /  \\       /  \\
    [1,2] [1,3] [2,1] [2,3] [3,1] [3,2]
      |     |     |     |     |     |
   [1,2,3][1,3,2][2,1,3][2,3,1][3,1,2][3,2,1]
    """
    result = []
    
    def backtrack(path):
        # Base case: permutation complete
        if len(path) == len(nums):
            result.append(path[:])  # Copy path
            return
        
        # Try each number
        for num in nums:
            if num in path:
                continue  # Skip used numbers
            
            # Choose
            path.append(num)
            # Explore
            backtrack(path)
            # Unchoose (backtrack)
            path.pop()
    
    backtrack([])
    return result


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“š ALTERNATIVE - Swap Method
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def permute_swap(nums):
    """
    In-place swapping approach
    
    Time: O(n!)
    Space: O(n)
    """
    result = []
    
    def backtrack(start):
        if start == len(nums):
            result.append(nums[:])
            return
        
        for i in range(start, len(nums)):
            # Swap
            nums[start], nums[i] = nums[i], nums[start]
            # Recurse
            backtrack(start + 1)
            # Backtrack
            nums[start], nums[i] = nums[i], nums[start]
    
    backtrack(0)
    return result


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ§ª TEST CASES
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

if __name__ == "__main__":
    test_cases = [
        [1, 2, 3],
        [0, 1],
        [1],
    ]
    
    print("=" * 70)
    print("ğŸ§ª TESTING PERMUTATIONS")
    print("=" * 70)
    
    for nums in test_cases:
        result1 = permute(nums.copy())
        result2 = permute_swap(nums.copy())
        
        print(f"\nInput: {nums}")
        print(f"Count: {len(result1)} permutations")
        print(f"Result: {result1}")
